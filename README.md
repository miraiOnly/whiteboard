# 在线白板（带存档+分享+实时同步）

## 一、项目介绍
轻量级本地部署的白板工具，支持使用多种工具绘图、存档管理、分享、离线使用（点击保存后将在网络恢复后自动存储）功能，以及分享链接的保存后实时内容同步。

## 二、核心功能
- 绘图工具：画笔、橡皮擦、文本、矩形、圆形、线段
- 样式自定义：画笔颜色、粗细调整，支持虚线绘制
- 画布操作：Ctrl+滚轮缩放、Alt+拖动平移、撤销（Ctrl+Z）/重做（Ctrl+Y）
- 存档管理：创建、加载、删除白板，本地文件持久化（重启不丢数据）
- 分享：生成可分享链接
- 实时同步：分享后，观众可实时查看白板最新保存的内容
- 快捷键支持：工具切换、撤销重做等操作支持快捷键，提升效率

## 三、环境要求
- 运行环境：Node.js ≥ 14.x（本机版本 v24.11.1，可执行 `node -v` 查看版本）
- 前端框架：Vue 3（Vite 构建）
- 包管理器：npm（默认自带，无需额外安装）

## 四、快速启动步骤

### 1. 项目目录结构
将所有文件按以下结构存放（无需手动创建 .json 文件，会自动生成）：
```
白板项目/
├── README.md                       # 本说明文件
├── whiteboard-backend              # 后端服务文件
├── whiteboard-frontend--template   # 前端界面实现文件
```

### 2. 安装依赖
#### （1）安装后端依赖
打开终端，进入项目根目录（`whiteboard-backend` 文件夹），打开终端执行命令：
```bash
npm install
```

#### （2）安装前端依赖
进入 `whiteboard-frontend--template` 文件夹（前端代码目录），执行命令：
```bash
npm install
```

### 3. 启动项目
#### （1）启动后端服务
在项目根目录执行命令：
```bash
node server.js
```
启动成功提示：
```
后端运行在 http://localhost:3000
API测试：http://localhost:3000/api/whiteboards
WebSocket服务启动：ws://localhost:3000
```

#### （2）启动前端服务
进入 `whiteboard-frontend--template` 文件夹，打开终端执行命令：
```bash
npm run dev
```
启动成功提示（此处以8080端口为例，可能用户实际为其他端口）：
```
  VITE v7.2.2  ready in 422 ms

  ➜  Local:   http://localhost:8080/
  ➜  Network: http://192.168.137.1:8080/
  ➜  Network: http://10.133.136.105:8080/
  ➜  press h + enter to show help
```

#### （3）访问应用
打开浏览器，输入地址：`http://localhost:XXXX`，即可使用白板应用。（此处实际网页为前端提示的Local网页）

## 五、使用教程

### 1. 基础操作
- 切换工具：点击工具栏对应的按钮（选择、画笔、橡皮擦等）
- 调整样式：通过工具栏的颜色选择器、大小输入框调整，勾选「虚线」可画虚线
- 选中/移动元素：使用「选择工具」点击元素，拖动即可移动
- 删除元素：选中元素后，点击「删除选中」按钮或按 Delete 键

### 2. 存档管理
- 新建白板：点击「+ 创建新白板」，生成空白画布
- 保存白板：编辑完成后，点击「保存白板」，数据自动持久化
- 加载存档：在存档列表中，找到目标白板点击「导入」
- 删除存档：在存档列表中，点击目标白板的「删除」按钮（不可恢复）

### 3. 分享链接
1. 必须先点击「保存白板」（新白板需先保存才能生成分享链接）
2. 点击「生成分享链接」
3. 点击输入框即可复制分享链接
4. 他人访问：打开链接即可查看，每次保存白板后会自动刷新被分享者白板

### 4. 常用快捷键
| 快捷键       | 功能                 |
|--------------|----------------------|
| Ctrl + Z     | 撤销上一步操作       |
| Ctrl + Y     | 重做上一步操作       |
| Alt + V            | 切换到选择工具       |
| Alt + P            | 切换到画笔工具       |
| Alt + E            | 切换到橡皮擦工具     |
| Alt + T            | 切换到文本工具       |
| Alt + R            | 切换到矩形工具       |
| Alt + C            | 切换到圆形工具       |
| Alt + L            | 切换到线段工具       |
| Delete       | 删除选中的元素       |

## 六、注意事项
1. 跨域限制：默认仅允许本地（localhost:5173/8080/3000）访问，外网使用需修改 `server.js` 中 `cors` 配置
2. 端口占用：若 3000 端口被占用，修改 `server.js` 中的 `port` 变量（如改为 3001）
